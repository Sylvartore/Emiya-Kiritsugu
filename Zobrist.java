package sylvartore;

import java.util.Arrays;

public class Zobrist {

    private long hash;
    private final long[][] bitStrings;

    private static final Zobrist INSTANCE = new Zobrist();

    public static Zobrist getInstance() {
        return INSTANCE;
    }

    private Zobrist() {
        bitStrings = new long[][]{
                {7145046541461285888L, 6667938002433527808L},
                {3620776969248656384L, 8813145642734226432L},
                {3918026862302407680L, 6668957638815036416L},
                {1087034086133487616L, 6820451990741049344L},
                {7798526750643588096L, 7889342159603376128L},
                {3769275623436230656L, 4810759696461195264L},
                {1807777631269564416L, 8609977487202974720L},
                {2212082898966715392L, 6918921104746558464L},
                {4395144110848176128L, 6651598504992717824L},
                {3128971422413115392L, 1536392091655346176L},
                {3182373882490920960L, 6375903050050682880L},
                {2549305476612731904L, 5220193993223138304L},
                {3272393767948804096L, 471654890791636992L},
                {8563226174574618624L, 3698784837423163392L},
                {3554564109659630592L, 673318001521410048L},
                {4671002671302876160L, 5864175576190052352L},
                {2821800554105600000L, 2417595302096253952L},
                {5600724444927251456L, 3598502926904574976L},
                {4217433687786155008L, 8476088784204065792L},
                {7555572587504385024L, 740364525053585408L},
                {3400154576588654592L, 1919730581178704896L},
                {2354656050149715968L, 8828881431222079488L},
                {2173450789103953920L, 8603311467292612608L},
                {120701281175591936L, 1595854582801719296L},
                {704091123142905856L, 7678371983140228096L},
                {8923894290918176768L, 7030722583689543680L},
                {1447165496498095104L, 3423140516107467776L},
                {4539908397420785664L, 2009340327203987456L},
                {2131607011678479360L, 6107156142347631616L},
                {6211276226890832896L, 6087353224712914944L},
                {3447725714347776000L, 3604170920960949248L},
                {3069546620492340224L, 8770660025149697024L},
                {6502852439389817856L, 3098028323544148992L},
                {6516800712346986496L, 4527962878890391552L},
                {916823389570686976L, 3396314967041647616L},
                {8694314809588407296L, 7810087690286654464L},
                {498848308211465216L, 5605188882644285440L},
                {6198119690527724544L, 7467398413280315392L},
                {2303520452405032960L, 7005579611519413248L},
                {7249607950623482880L, 8828591979728820224L},
                {9035875362042169344L, 4765328982092048384L},
                {1931427160536268800L, 2802257430032668672L},
                {5032790734118350848L, 2912298188649638912L},
                {8270332811929976832L, 1491473630990237696L},
                {8514824555445678080L, 6130585111011290112L},
                {4604017154909403136L, 8379769568010776576L},
                {4461147366160823296L, 6649143053816260608L},
                {1399801129930961920L, 8841767262165660672L},
                {3029359482729994240L, 7322530902445432832L},
                {5622370695082846208L, 8013898524686469120L},
                {7714735852910782464L, 8936555266211399680L},
                {4879785552661603328L, 1620535351015767040L},
                {3296890079422123008L, 965436621236961280L},
                {299428562173882368L, 2357308762947024896L},
                {5464368956366948352L, 420463230439138304L},
                {7567033917864089600L, 2112706581067958272L},
                {870336702454434816L, 52521407977533440L},
                {46477078107572224L, 6338685364197637120L},
                {4571777225976153088L, 6755332577558068224L},
                {4832386591924767744L, 7466686269718768640L},
                {4824390628387859456L, 2194418076339996672L}
        };
    }
//    public Zobrist() {
//        bitStrings = new long[61][2];
//        for (int i = 0; i < 61; i++) {
//            for (int j = 0; j < 2; j++) {
//                bitStrings[i][j] = ((long) (Math.random() * Long.MAX_VALUE));
//            }
//        }
//        hash = 0;
//    }

//    public Zobrist(Zobrist from) {
//        this.bitStrings = from.bitStrings;
//        this.hash = from.hash;
//    }

//    public void reset() {
//        hash = 0;
//    }

    public long hash(byte[] state) {
        long hash = 0;
        for (int i = 0; i < 61; i++) {
            if (state[i] == 0) continue;
            hash = hash ^ bitStrings[i][state[i] == 1 ? 1 : 0];
        }
        return hash;
    }

//    public void xor(int position, int piece) {
//        hash = hash ^ bitStrings[position][piece + 1];
//    }

//    @Override
//    public int hashCode() {
//        return hash;
//    }

    public static void main(String[] args) {
        for (int i = 0; i < 61; i++) {
            System.out.print("{");
            boolean f = true;
            for (int j = 0; j < 2; j++) {
                System.out.print((((long) (Math.random() * Long.MAX_VALUE))) + "L");
                if (f) {
                    System.out.print(",");
                    f = false;
                }
            }
            System.out.println("},");
        }
    }

}
